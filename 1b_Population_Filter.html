<html>
    <head><
        <title> 
          Population Based Filter
        </title>
    </head>
    <body>
        <p align = "center">
            <h2> 1b) Get all the countries with population of less than 2 lakhs using Filter method </h2>
            <h3> Please check "Console" for the output </h3>
        </p>
        <script>
            try
            {
            let xhr =  new XMLHttpRequest();
            xhr.open("GET","https://restcountries.com/v3.1/all",true);
            xhr.onload = function()
            {
                if(xhr.status>=200 && xhr.status<300)
                {
                    let response = JSON.parse(xhr.responseText);
                    let populationFilterObj = response.filter ( (obj) => {
                       return obj.population<200000;
                    });

                    console.log("Total number of countries with population of less than 2 lakhs  : " + populationFilterObj.length);
                    for(let i=0;i<populationFilterObj.length;i++)
                    {
                            console.log((i+1) + ". " + populationFilterObj[i].name.common + " :  " + populationFilterObj[i].population);        
                    }
                    
                } 
                else
                {
                      console.log("Request failed, unable to get data from server!");
                }
            }

            xhr.send();
        }

        catch(err)
            {
                console.log("The following run time error occured : ", err.message);
            }

        </script>
    </body>
</html>