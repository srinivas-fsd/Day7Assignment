<html>
    <head><
        <title> 
          Print Country Details
        </title>
    </head>
    <body>
        <p align = "center">
            <h2> 1c) Printing name, capital,flag using forEach </h2>
            <h3> Please check "Console" for the output </h3>
            <h3>You can view the flags by navigating to corresponding URL </h3>
        </p>
        <script>
            try
            {
            let xhr =  new XMLHttpRequest();
            xhr.open("GET","https://restcountries.com/v3.1/all",true);
            xhr.onload = function()
            {
                if(xhr.status>=200 && xhr.status<300)
                {
                    var response = JSON.parse(xhr.responseText);
                    
                        console.log("Total number of countries  : " + response.length);
                        
                        let count = 1;
                        response.forEach( (object) => {
                            console.log("**************************** Country " + (count) + "****************************")
                            
                            console.log("Country Name : " , object.name.common);
                            if(object.capital!=undefined)
                            {
                                console.log("Capital      : " , object.capital[0]);
                            }
                            else
                            {
                                console.log("Capital      : CAPITAL NOT KNOWN ");
                            }
                            console.log("Flag         : " , object.flags.png);
                            
                            count=count+1;
                        });
                    
                } 
                else
                {
                      console.log("Request failed, unable to print country details from server!");
                }
            }

            xhr.send();
        }
        catch(err)
        {
            console.log("The following run time error occured : ", err.message);
        }

        </script>
    </body>
</html>